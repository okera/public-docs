<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Migration | Okera User Documentation</title>
<link rel="stylesheet" href="theme/css/syntax.css">
<link rel="icon" type="image/png" href="/assets/images/icon-favicon32.png">

<script src="https://use.fontawesome.com/d9343c4626.js"></script>

<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="theme/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
<link rel="stylesheet" href="theme/css/asciidoctor.css">
<link rel="stylesheet" href="theme/css/custom.css">
<link rel="stylesheet" href="theme/css/boxshadowproperties.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="theme/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="theme/js/toc.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="theme/js/customscripts.js"></script>

<script>
$( document ).ready(function() {
  $( "blockquote:contains('Note')" ).addClass( "admonitionblock note" );
  $( "blockquote:contains('Warning')" ).addClass( "admonitionblock warning" );
  $( "blockquote:contains('Tip')" ).addClass( "admonitionblock tip" );
  $( ".admonitionblock.note" ).prepend( '<i class="fa fa-check admonition"></i>' );
  $( ".admonitionblock.warning" ).prepend( '<i class="fa fa-exclamation-triangle admonition"></i>' );
  $( ".admonitionblock.tip" ).prepend( '<i class="fa fa-lightbulb-o admonition"></i>' );
});
</script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-wordmark"><a href="/">
              <img src="assets/images/okera-wordmark-white.png" alt="Okera wordmark" /></a>
            </div>

        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> -->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="search">Search</a></li>
                
                
                
                <li><a href="https://www.okera.com/blog" target="_blank">Okera Blog</a></li>
                
                
                
                <li><a href="https://okera.com" target="_blank">okera.com</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!-- comment out this block if you want to hide search
                <li class="dropdown">

                  <div id="search-demo-container">
                      <form action="/search" method="GET">
                      <input type="text" name="q" id="search-input" placeholder="Search the docs...">
                      </form>
                  </div>

                </li>
                end search -->
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                


<ul id="mysidebar" class="nav affix">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a href="#">Discover</a>
      <ul>
          
          
          
          <li><a href="product-overview">Product Overview</a> </li>
          
          
          
          
          
          
          <li><a href="odas-overview">Okera Data Access Service Overview</a> </li>
          
          
          
          
          
          
          <li><a href="catalog-overview">Okera Catalog Overview</a> </li>
          
          
          
          
          
          
          <li><a href="okera-architecture-overview">Platform Architecture Overview</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Install</a>
      <ul>
          
          
          
          <li><a href="getting-started">Getting Started</a> </li>
          
          
          
          
          
          
          <li><a href="install">Installation Guide</a> </li>
          
          
          
          
          
          
          <li><a href="advanced-install">Advanced Installation Option</a> </li>
          
          
          
          
          
          
          <li><a href="kerberos-cluster-setup">Kerberos</a> </li>
          
          
          
          
          
          
          <li><a href="secure-okera-rest-api-ldap">LDAP Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="secure-okera-rest-api-oauth">OAuth Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-types">Cluster Types</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-sizing">Cluster Sizing</a> </li>
          
          
          
          
          
          
          <li><a href="memory-usage">Platform Memory Usage</a> </li>
          
          
          
          
          
          
          <li><a href="secure-deployment-manager-rest-api">Deployment Manager REST Security</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Engage</a>
      <ul>
          
          
          
          <li><a href="web-ui-basics">Okera Portal Basics</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Administer</a>
      <ul>
          
          
          
          <li><a href="cluster-administration">Cluster Administration</a> </li>
          
          
          
          
          
          
          <li><a href="web-ui-admin">Okera Portal for Admins</a> </li>
          
          
          
          
          
          
          <li><a href="schema-design">Schema Design</a> </li>
          
          
          
          
          
          
          <li><a href="authorization">Authorization</a> </li>
          
          
          
          
          
          
          <li><a href="auditing">Auditing</a> </li>
          
          
          
          
          
          
          <li><a href="okera-database-cli">Database CLI</a> </li>
          
          
          
          
          
          
          <li><a href="ip-address-management">IP Address Management</a> </li>
          
          
          
          
          
          
          <li><a href="kubernetes-dashboard-quickstart">Cluster Monitoring with Kubernetes Addons</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-launch-plugin-api">Cluster Launch API</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Integrate</a>
      <ul>
          
          
          
          <li><a href="emr-integration">EMR Integration</a> </li>
          
          
          
          
          
          
          <li><a href="pyokera">Native Python Integration</a> </li>
          
          
          
          
          
          
          <li><a href="client-integration">Client Integration</a> </li>
          
          
          
          
          
          
          <li><a href="planner-integration">Planner Integration</a> </li>
          
          
          
          
          
          
          <li><a href="third-party-integration">Third-Party Integration</a> </li>
          
          
          
          
          
          
          <li><a href="odas-cdh-integration">CDH Integration</a> </li>
          
          
          
          
          
          
          <li><a href="tableau-web-data-connector">Tableau Integration</a> </li>
          
          
          
          
          
          
          <li><a href="service-port-assignments">Service Ports</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Develop</a>
      <ul>
          
          
          
          <li><a href="supported-sql">Supported SQL</a> </li>
          
          
          
          
          
          
          <li><a href="odas-authentication">Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="catalog-rest-api">REST API</a> </li>
          
          
          
          
          
          
          <li><a href="client-configs">Client Configuration</a> </li>
          
          
          
          
          
          
          <li><a href="complex-types">Complex Data Types</a> </li>
          
          
          
          
          
          
          <li><a href="data-types">Supported Data Types</a> </li>
          
          
          
          
          
          
          <li><a href="extending-odas">Extending ODAS</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Reference</a>
      <ul>
          
          
          
          <li><a href="release-notes">Release Notes</a> </li>
          
          
          
          
          
          
          <li><a href="quick-recipes">Quick Recipes</a> </li>
          
          
          
          
          
          
          <li><a href="faq">Frequently Asked Questions</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
    
    <li>
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2', title: 'On This Page' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    </li>
    

</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-content">

   

    


    

  <h1 id="migration">Migration</h1>

<p>This document describes steps required to migrate from versions before 1.1.0 to versions after.
These steps are required as multiple references have been renamed from <code class="highlighter-rouge">cerebro</code> to <code class="highlighter-rouge">okera</code>.</p>

<p>It is not possible to upgrade an existing cluster from prior to 1.1.0 to after.
Note that this is only for the clusters – catalog metadata and policies will have no issues.</p>

<h2 id="release-artifact-paths">Release artifact paths</h2>

<p><strong>Location of release binaries in S3 changed bucket</strong></p>

<p>The S3 location that contains the release binaries have changed from <code class="highlighter-rouge">cerebrodata-release-useast</code> to <code class="highlighter-rouge">okera-release-useast</code> and <code class="highlighter-rouge">cerebrodata-release-uswest</code> to <code class="highlighter-rouge">okera-release-uswest</code>.
In addition, the US West bucket is now in the us-west-2 region from us-west-1.</p>

<p>Users that have built automation based on the install instructions will likely need updates, for example, downloading the Deployment Manager or CLI binaries.</p>

<h2 id="deploymentmanager">DeploymentManager</h2>

<p><strong>Default logging directory renamed from <code class="highlighter-rouge">/var/log/cerebro</code> to <code class="highlighter-rouge">/var/log/okera</code></strong></p>

<p>This directory is typically automatically created by the DM install script.
Scripts or users reading the logs will need to be updated to the new location.</p>

<p><strong>Default install directory changed from <code class="highlighter-rouge">/opt/cerebro</code> to <code class="highlighter-rouge">/opt/okera</code></strong></p>

<p>This directory is completely user controlled and should not impact any existing automation.
This is the directory specified when the DM tarball is downloaded and extracted.
We recommend updating this in the automation to avoid future confusion.</p>

<p><strong>Default config directory changed from <code class="highlighter-rouge">/etc/cerebro</code> to <code class="highlighter-rouge">/etc/okera</code></strong></p>

<p>This directory contains numerous configurations files and will need to be moved.</p>

<ul>
  <li>
    <p>This is where <code class="highlighter-rouge">env.sh</code> is sourced from, which contains system wide configs.</p>
  </li>
  <li>
    <p>This is where we recommend <code class="highlighter-rouge">launch-ec2-machine.sh</code> and other related launch scripts are.
These are typically used in <code class="highlighter-rouge">ocadm environments create</code>.</p>
  </li>
  <li>
    <p>This directory is where we recommend other config files, such as <code class="highlighter-rouge">krb5.conf</code> or oauth client secret files to be stored.
These paths are typically referenced in <code class="highlighter-rouge">/etc/okera/env.sh</code> and will need to be updated as well.</p>
  </li>
</ul>

<p><strong>Agent path updates</strong></p>

<p>The directory change also applices to the ODAS cluster machines.
End users typically do not need to modify anything on the ODAS cluster so this is expected to require no user changes.</p>

<h2 id="emr">EMR</h2>

<p><strong>Hadoop services are now part of group <code class="highlighter-rouge">okera</code> instead of <code class="highlighter-rouge">cerebro</code>.</strong></p>

<p>This includes for, example, hive, spark, and yarn.
As this is usually handled by the bootstrap automation script, and not require user changes.</p>

<p><strong>User token now placed in <code class="highlighter-rouge">~/.okera</code> instead of <code class="highlighter-rouge">~/.cerebro</code>.</strong></p>

<p>The <code class="highlighter-rouge">~/.cerebro</code> directory is now a symlink but will be removed in a future release.</p>

<p><strong>Name and location of bootstrap script changed</strong></p>

<p>The location of the emr bootstrap script has changed from <code class="highlighter-rouge">s3://cerebrodata-release-useast/utils/emr/cdas-emr-bootstrap.sh</code> to <code class="highlighter-rouge">s3://okera-release-useast/utils/emr/odas-emr-bootstrap.sh</code>.
Note that both the path and name of the script have changed.</p>

<p>The EMR scripts exist in both the us-east and us-west release buckets.</p>

<h2 id="pycerebro">PyCerebro</h2>

<p>PyCerebro has been renamed to PyOkera.
The latest version (0.8.3.1) will continue to be <a href="https://pypi.org/project/pycerebro/">available</a> but will not be updated anymore.
The new library is available on <a href="https://pypi.org/project/pyokera/">PyPI</a>.</p>

<p><strong>Modules renamed</strong></p>

<p><code class="highlighter-rouge">cerebro</code> has been renamed to <code class="highlighter-rouge">okera</code> and <code class="highlighter-rouge">cdas</code> has been renamed to <code class="highlighter-rouge">odas</code>.
For typical users, the change is from:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cerebro.cdas</span>
<span class="kn">from</span> <span class="nn">cerebro</span> <span class="kn">import</span> <span class="n">context</span>
<span class="o">...</span>
</code></pre></div></div>

<p>to:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">okera.odas</span>
<span class="kn">from</span> <span class="nn">okera</span> <span class="kn">import</span> <span class="n">context</span>
<span class="o">...</span>
</code></pre></div></div>

<p>The APIs otherwise behave identically.</p>

<p><strong>Package rename and install updates</strong>
As the package has been renamed, the install steps need to be updated.
Previous users running <code class="highlighter-rouge">pip3 install pycerebro</code> now need to run <code class="highlighter-rouge">pip3 install pyokera</code>.
Similarly, users installing from eggs will now be downloading <code class="highlighter-rouge">pyokera.egg</code> instead of <code class="highlighter-rouge">pycerebro.egg</code>.
The install <a href="pyokera">instructions</a> have been updated as well.</p>

<h2 id="environment-variables">Environment Variables</h2>

<p><strong>Environment variables renamed from <code class="highlighter-rouge">CEREBRO_</code> to <code class="highlighter-rouge">OKERA_</code>.</strong>
The old values starting with <code class="highlighter-rouge">CEREBRO_</code> will continue to work in this release for backwards compatibility but will be removed in a future release.</p>

<p>This should be safe to do via search and replace.
On linux we recommend running as a starting point:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find ./bin <span class="nt">-type</span> f <span class="nt">-exec</span> sed <span class="nt">-i</span> <span class="s1">'s/CEREBRO_/OKERA_/g'</span> <span class="o">{}</span> <span class="se">\;</span>
</code></pre></div></div>

<p>On OSX:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find ./bin <span class="nt">-type</span> f <span class="nt">-exec</span> sed <span class="nt">-i</span> <span class="s1">''</span> <span class="s1">'s/CEREBRO_/OKERA_/g'</span> <span class="o">{}</span> <span class="se">\;</span>
</code></pre></div></div>


    <div class="tags">
        
    </div>




</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                  <img src="assets/images/icon-footer.png" class="logo" />
                  <div class="footer-meta">
               &copy;2018 Okera, Inc. All rights reserved. <br />
 Site last generated: Jun 13, 2018
                  </div>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
